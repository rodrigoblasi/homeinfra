version: "2.1"
services: 
  samba:
    image: dperson/samba
    container_name: samba
    volumes:
      - /srv/noncriticaldata:/shares/noncriticaldata:z
      - /srv/criticaldata:/shares/criticaldata:z
    environment:
      - SAMBA_LOG_LEVEL=5
      - TZ= 'America/Sao_Paulo'
    read_only: false
    network_mode: bridge
    ports:
      - "137:137/udp"
      - "138:138/udp"
      - "139:139/tcp"
      - "445:445/tcp"
    command: >
      -w "WORKGROUP"
      -u "guestacc;guestacc"
      -s "NonCriticalData;/shares/noncriticaldata"
      -p
      -S
      -n
      -r
      -G "NonCriticalData;force user = root"
      -G "NonCriticalData;force group = root"
      -G "NonCriticalData;force directory mode = 0777"
      -G "NonCriticalData;force create mode = 0777"
      -G "NonCriticalData;writeable = yes"
      -G "NonCriticalData;read only = no"
      -G "NonCriticalData;guest ok = yes"
      -G "NonCriticalData;guest only = yes"
    restart: unless-stopped